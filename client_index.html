<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudyBook - Сабақ оқуға арналған</title>
  <style>
    :root { --bg: #f8f5f0; --text: #3d2b1f; --accent: #8b6f47; --light: #d9c2a7; }
    body { margin:0; font-family: 'Georgia', serif; background:var(--bg); color:var(--text); transition: all 0.8s; height:100vh; }
    body.dark { background:#1e1e1e; color:#e0d6c9; }
    .book-bg { position:fixed; top:0; left:0; width:100%; height:100%; background:linear-gradient(to bottom, var(--light), var(--bg)); animation: gentleSway 20s infinite ease-in-out; z-index:-1; }
    @keyframes gentleSway { 0%,100% { transform: translateX(0) rotate(0); } 50% { transform: translateX(10px) rotate(0.5deg); } }
    header { text-align:center; padding:20px; }
    h1 { font-size:2.5em; margin:0; }
    #timer { position:fixed; top:20px; right:20px; background:var(--accent); color:white; padding:15px 30px; border-radius:50px; font-size:1.5em; cursor:pointer; box-shadow:0 4px 15px rgba(0,0,0,0.3); animation:pulse 4s infinite; }
    @keyframes pulse { 0%,100% { box-shadow:0 4px 15px rgba(0,0,0,0.3); } 50% { box-shadow:0 8px 25px gold; } }
    .tabs { text-align:center; margin:20px 0; }
    .tab-btn { padding:12px 24px; margin:5px; background:var(--light); border:none; border-radius:30px; cursor:pointer; transition:0.4s; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
    .tab-btn:hover { transform:translateY(-5px) scale(1.05); box-shadow:0 10px 20px rgba(0,0,0,0.2); }
    .tab-btn.active { background:var(--accent); color:white; }
    .tab-content { display:none; max-width:900px; margin:0 auto; padding:30px; background:rgba(255,255,255,0.8); border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,0.2); min-height:60vh; }
    .tab-content.active { display:block; animation:pageFlip 0.8s; }
    @keyframes pageFlip { 0% { opacity:0; transform:perspective(1000px) rotateY(-30deg); } 100% { opacity:1; transform:none; } }
    #draw-canvas { width:100%; height:400px; background:white; border-radius:15px; cursor:crosshair; }
    textarea { width:100%; height:400px; padding:15px; border-radius:15px; font-family:inherit; font-size:1.1em; }
    #links a { display:inline-block; padding:10px 20px; background:var(--accent); color:white; margin:10px; border-radius:30px; text-decoration:none; transition:0.3s; }
    #links a:hover { transform:scale(1.1); }
    body.dark .tab-content { background:rgba(0,0,0,0.6); }
  </style>
</head>
<body>
  <div class="book-bg"></div>
  <header>
    <h1>StudyBook</h1>
    <p>Әдемі анимациялы оқу платформасы</p>
  </header>
  <div id="timer">25:00</div>
  <div class="tabs">
    <button class="tab-btn active" onclick="openTab('study')">Оқу сілтемелері</button>
    <button class="tab-btn" onclick="openTab('draw')">Сызу</button>
    <button class="tab-btn" onclick="openTab('write')">Жазу</button>
    <button class="tab-btn" onclick="openTab('music')">Музыка</button>
    <button class="tab-btn" onclick="document.body.classList.toggle('dark')">Түнгі режим</button>
  </div>
  <div id="study" class="tab-content active">
    <input id="link-name" placeholder="Сілтеме аты (мыс: Khan Academy)"> 
    <input id="link-url" placeholder="URL[](https://...)"> 
    <button onclick="addLink()">Қосу</button>
    <div id="links"></div>
  </div>
  <div id="draw" class="tab-content">
    <canvas id="draw-canvas"></canvas>
  </div>
  <div id="write" class="tab-content">
    <textarea placeholder="Мұнда эссе, заметка немесе кез келген мәтін жазыңыз..."></textarea>
  </div>
  <div id="music" class="tab-content">
    <iframe width="100%" height="400" src="https://open.spotify.com/embed/playlist/37i9dQZF1DX8ymr6ERYeJc?utm_source=generator" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
  </div>

  <script>
    // Помодоро таймері
    let time = 25 * 60;
    const timerEl = document.getElementById('timer');
    setInterval(() => {
      if (time > 0) time--;
      const m = Math.floor(time / 60).toString().padStart(2, '0');
      const s = (time % 60).toString().padStart(2, '0');
      timerEl.textContent = `${m}:${s}`;
    }, 1000);
    timerEl.onclick = () => {
      const newMin = prompt('Жаңа уақыт (минут):', 25);
      if (newMin) time = newMin * 60;
    };

    // Табтар
    function openTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      event.target.classList.add('active');
    }

    // Сызу
    const canvas = document.getElementById('draw-canvas');
    if (canvas) {
      canvas.width = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;
      const ctx = canvas.getContext('2d');
      ctx.lineWidth = 3; ctx.lineCap = 'round';
      let drawing = false;
      canvas.onmousedown = e => { drawing = true; ctx.beginPath(); ctx.moveTo(e.offsetX, e.offsetY); };
      canvas.onmousemove = e => { if (drawing) { ctx.lineTo(e.offsetX, e.offsetY); ctx.stroke(); } };
      canvas.onmouseup = canvas.onmouseleave = () => drawing = false;
    }

    // Жылдам сілтемелер
    function addLink() {
      const name = document.getElementById('link-name').value || 'Сілтеме';
      const url = document.getElementById('link-url').value;
      if (!url) return;
      const a = document.createElement('a');
      a.href = url; a.textContent = name; a.target = '_blank';
      document.getElementById('links').appendChild(a);
      localStorage.setItem('savedLinks', document.getElementById('links').innerHTML);
    }
    if (localStorage.getItem('savedLinks')) {
      document.getElementById('links').innerHTML = localStorage.getItem('savedLinks');
    }
  </script>
</body>
</html>
